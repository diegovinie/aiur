#! /bin/bash
set -e

APP_NAME=aiur
DIR_SCRIPT=$(dirname $(readlink -f $0))

echo "For Aiur!"
echo

. $DIR_SCRIPT/includes/common

if [[ $1 == 'version' ]]; then
    echo "Aiur version $APP_VERSION"

elif [[ $1 == 'enc' ]]; then
    . $DIR_SCRIPT/includes/enc

elif [[ $1 == 'image' ]]; then
    . $DIR_SCRIPT/includes/image

    if [[ $2 == 'optimize' ]]; then
        echo "Reduciendo el tama√±o de $3"
        SOURCE=$(pwd)/$3

        if [ -d $SOURCE ]; then
            reduce_image_rec $SOURCE
        else
            echo 'No es directorio.'
        fi
    else
        echo "No se hizo nada."
        exit 1
    fi

elif [[ $1 == 'test' ]]; then
    echo 'testing:'

elif [[ $1 == 'help' ]]; then
    . $DIR_SCRIPT/includes/help

else
    echo "No se reconoce el comando $1."
fi

echo
